<!DOCTYPE html>
<html lang="en">
<html>
<head>
    <meta charset="utf-8">
    <title>Image Processing App</title>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/gifpanel.css">
    <link rel="stylesheet" type="text/css" href="css/fileupload.css">
    <script type="text/javascript" src="javascript.js"></script>
</head>
<body>
<div id="layout">

    <h2>Serverless GIF generation on AWS</h2>
    <div id="info" style=" text-align: left;">

        <div>

            <p>This app takes an image and generates some cool GIFs. </p>
            <p>ItÂ´s completely serverless and hosted on AWS (S3, ApiGateway, Lambda and SNS) <br>

            </p>
            <p>
                Source code, architecture diagrams, and others in
                <a href='https://github.com/MMazzini1/serverless-image-processing'>GitHub</a>
            </p>


        </div>

    </div>

    <div id="UPLOAD" style ="margin-top:50px">
        <div class="intro">
            <h3>Upload an image and click on GENERATE GIFS</h3>

            <p > Picture must be
                <span style="color: #ff0000">        jpeg/png</span>
                and under
                <span style="color: #ff0000">     3 MB.</span>

                Generation takes less than a minute.
                Examples are shown below. </p>

            <form id="form" enctype="multipart/form-data">
                <div class="input-group" >


                    <labelfor="file-upload" class="custom-file-upload">
                        <i class="fa fa-cloud-upload"></i>
                    </label>
                    <input  id ="file"  id="file-upload" type="file"/>
                </div>



                <button class="submit-btn" type="submit">GENERATE GIFS</button>
            </form>
        </div>
    </div>




    <div id="gif-examples" class="container">
        <div id="resized-">
            <img src="gifgenerationblur.gif" class="gif-img">
            <!--   <a href="gifgenerationblur.gif" class ="buttonstyle" download>
                   Download
               </a>-->
            <div>
                <button id="Button">Download</button>
            </div>
        </div>

        <div id="resized2-">
            <img  src="templegifgenerationcyclic.gif" class="gif-img">
            <div>
                <button id="Button2">Download</button>
            </div>
        </div>

        <div id="resized3-">
            <img  src="officegifgenerationrecursive.gif" class="gif-img">
            <div>
                <button id="Button3">Download</button>
            </div>
        </div>
    </div>


    <script>
        updateDownloadButtonOnStartUp("resized-", "gifgenerationblur.gif")
        updateDownloadButtonOnStartUp("resized2-", "templegifgenerationcyclic.gif")
        updateDownloadButtonOnStartUp("resized3-", "officegifgenerationrecursive.gif")


        const form = document.getElementById("form");
        const inputFile = document.getElementById("file");
        var formData = new FormData();
        form.addEventListener("submit", handleSubmit)
    </script>
</body>


<script>


    /*

<!--
    <div id="results">
        <div>
            <h1>Single File Uploadd</h1>
            <input type="file" id="file-uploader" accept=".jpg, .png">
            <p>Upload a file and see the output in browser console</p>

            <p id="feedback"></p>
        </div>
-->

    /* const fileUploader = null;
        fileUploader.addEventListener('change', (event) => {
            const files = event.target.files;
            const file = event.target.files[0];
            console.log('files', files);

            // show the upload feedback
            const size = file.size;
            const feedback = document.getElementById('feedback');
            var msg = `File ${files[0].name} uploaded successfully!`;

            if (size > 1024 * 1024) {
                msg = `<span style="color:red;">The allowed file size is 1MB. The file you are trying to upload is of ${returnFileSize(size)}</span>`;
            } else {
                msg = `<span style="color:green;"> A ${returnFileSize(size)} file has been uploaded successfully. </span>`;
            }

            feedback.innerHTML = msg;
        });

        function returnFileSize(number) {
            if (number < 1024) {
                return number + 'bytes';
            } else if (number >= 1024 && number < 1048576) {
                return (number / 1024).toFixed(2) + 'KB';
            } else if (number >= 1048576) {
                return (number / 1048576).toFixed(2) + 'MB';
            }
        }*/


</script>

</html>
